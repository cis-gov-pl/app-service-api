<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CISAppServer Package &mdash; CIŚ Web Services 0.2 documentation</title>
    
    <link rel="stylesheet" href="_static/cistheme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="CIŚ Web Services 0.2 documentation" href="index.html" />
    <link rel="up" title="Implementation reference" href="modules.html" />
    <link rel="prev" title="CISAppGateway Package" href="CISAppGateway.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="CISAppGateway.html" title="CISAppGateway Package"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">CIŚ Web Services 0.2 documentation</a> &raquo;</li>
          <li><a href="modules.html" accesskey="U">Implementation reference</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="webapi.html">Web API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Implementation reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="modules.html#source-code">Source Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html#running-webservice-locally">Running Webservice locally</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="modules.html#class-reference">Class reference</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="CISAppGateway.html"
                        title="previous chapter">CISAppGateway Package</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/CISAppServer.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="cisappserver-package">
<h1>CISAppServer Package<a class="headerlink" href="#cisappserver-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-CISAppServer.JobManager">
<span id="jobmanager-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">JobManager</span></tt> Module<a class="headerlink" href="#module-CISAppServer.JobManager" title="Permalink to this headline">¶</a></h2>
<p>Main module of CISAppServer. Responsible for job management.</p>
<dl class="class">
<dt id="CISAppServer.JobManager.Job">
<em class="property">class </em><tt class="descclassname">CISAppServer.JobManager.</tt><tt class="descname">Job</tt><big>(</big><em>job_id</em><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Class that implements a job instance.</p>
<p>Allows to:</p>
<ul class="simple">
<li>query/set job state,</li>
<li>generate the output status file,</li>
<li>query job parameters defined in job request.</li>
</ul>
<p>Works with existing job requests that are identified by their unique ID
string. Upon initialization loads job parameters from job request JSON
file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job_id</strong> &#8211; The unique job ID.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="CISAppServer.JobManager.Job.calculate_size">
<tt class="descname">calculate_size</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.calculate_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate size of output directory of the job if it exists.</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.JobManager.Job.chain">
<tt class="descname">chain</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.JobManager.Job.chain" title="Permalink to this definition">¶</a></dt>
<dd><p>List of job IDs whose output we would like to consume (job chaining)</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.cleanup">
<tt class="descname">cleanup</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark job as in cleanup state.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.compact">
<tt class="descname">compact</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.compact" title="Permalink to this definition">¶</a></dt>
<dd><p>Release resources allocated for the job (data, valid_data).</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.JobManager.Job.data">
<tt class="descname">data</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.JobManager.Job.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Job parameters as specified in job request.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.delete">
<tt class="descname">delete</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark job for removal.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.die">
<tt class="descname">die</tt><big>(</big><em>message</em>, <em>exit_code=-99</em>, <em>err=True</em>, <em>exc_info=False</em><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.die" title="Permalink to this definition">¶</a></dt>
<dd><p>Abort further job execution with proper error in AppServer log as well
as with proper message for client in the job output status file. Sets
job state as <em>closing</em>. After cleanup the job state will be <em>aborted</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> &#8211; Message to be passed to logs and client,</li>
<li><strong>exit_code</strong> &#8211; One of <tt class="xref py py-class docutils literal"><span class="pre">ExitCodes</span></tt>,</li>
<li><strong>err</strong> &#8211; if True use log as ERROR otherwise use WARNING priority,</li>
<li><strong>exc_info</strong> &#8211; if True logging will extract current exception info
(use in except block to provide additional information to the
logger).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.exit">
<tt class="descname">exit</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalise job cleanup by setting the state and passing the exit message
to the user. Should be called only after Job.finish() method was
called.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.finish">
<tt class="descname">finish</tt><big>(</big><em>message</em>, <em>state='done'</em>, <em>exit_code=0</em><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.finish" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark job as finished. Job will be set into <em>closing</em> state. When
cleanup is finished the <a class="reference internal" href="#CISAppServer.JobManager.Job.exit" title="CISAppServer.JobManager.Job.exit"><tt class="xref py py-meth docutils literal"><span class="pre">exit()</span></tt></a> method should be called to set
the job into its &#8220;exit state&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> &#8211; that will be passed to user,</li>
<li><strong>state</strong> &#8211; Job state after cleanup will finish. One of:
[&#8216;done&#8217;, &#8216;failed&#8217;, &#8216;aborted&#8217;, &#8216;killed&#8217;],
:param exit_code: one of <tt class="xref py py-class docutils literal"><span class="pre">ExitCodes</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.get_exit_state">
<tt class="descname">get_exit_state</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.get_exit_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Get job &#8220;exit state&#8221; - the state that job will be put into after it is
finalised. The &#8220;exit state&#8221; is set using <a class="reference internal" href="#CISAppServer.JobManager.Job.finish" title="CISAppServer.JobManager.Job.finish"><tt class="xref py py-meth docutils literal"><span class="pre">finish()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><dl class="docutils">
<dt>One of valid job exit states or None if the &#8220;exit state&#8221; is</dt>
<dd>not yet defined:</dd>
</dl>
<ul>
<li><dl class="first docutils">
<dt>done:</dt>
<dd>job has finished,</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>failed:</dt>
<dd>job has finished with non zero exit code,</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>aborted:</dt>
<dd>an error occurred during job preprocessing, submission or
postprocessing,</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>killed:</dt>
<dd>job was killed,</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.get_size">
<tt class="descname">get_size</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.get_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the size of job output directory.
Requires that calculate_size was called first.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Size of output directory in bytes.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.get_state">
<tt class="descname">get_state</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.get_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Get current job state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">One of valid job states:</td>
</tr>
</tbody>
</table>
<ul>
<li><dl class="first docutils">
<dt>waiting:</dt>
<dd><p class="first last">job request was submitted and is waiting for JobManager to process
it,</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>queued:</dt>
<dd><p class="first last">job reuest was processed and is queued in the scheduling backend,</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>running:</dt>
<dd><p class="first last">job is running on a compute node,</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>closing:</dt>
<dd><p class="first last">job has finished and is waiting for cleanup,</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>cleanup:</dt>
<dd><p class="first last">job has finished and cleanup of resources is performed,</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>done:</dt>
<dd><p class="first last">job has finished,</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>failed:</dt>
<dd><p class="first last">job has finished with non zero exit code,</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>aborted:</dt>
<dd><p class="first last">an error occurred during job preprocessing, submission or
postprocessing,</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>killed:</dt>
<dd><p class="first last">job was killed,</p>
</dd>
</dl>
</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.JobManager.Job.id">
<tt class="descname">id</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.JobManager.Job.id" title="Permalink to this definition">¶</a></dt>
<dd><p>Unique job ID string.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.mark">
<tt class="descname">mark</tt><big>(</big><em>message</em>, <em>exit_code=-96</em><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.mark" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark job as killed by user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> &#8211; that will be passed to user,</li>
<li><strong>exit_code</strong> &#8211; one of <tt class="xref py py-class docutils literal"><span class="pre">ExitCodes</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.queue">
<tt class="descname">queue</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark job as queued.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.Job.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.Job.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Mark job as running.</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.JobManager.Job.service">
<tt class="descname">service</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.JobManager.Job.service" title="Permalink to this definition">¶</a></dt>
<dd><p>Jobs&#8217; Service</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.JobManager.Job.valid_data">
<tt class="descname">valid_data</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.JobManager.Job.valid_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Job parameters after validation</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CISAppServer.JobManager.JobManager">
<em class="property">class </em><tt class="descclassname">CISAppServer.JobManager.</tt><tt class="descname">JobManager</tt><a class="headerlink" href="#CISAppServer.JobManager.JobManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Main calss of CISAppServer. It is responsible for job management.</p>
<p>Upon initialization stes up Validator and Sheduler interfaces.</p>
<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.check_cleanup">
<tt class="descname">check_cleanup</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.check_cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Check jobs marked for cleanup.</p>
<p>Starts the cleanup for the jobs in separate threads.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.check_deleted_jobs">
<tt class="descname">check_deleted_jobs</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.check_deleted_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for jobs marked for removal.</p>
<p>If found remove all resources related to the job. If a job is still
running kill it.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.check_job_kill_requests">
<tt class="descname">check_job_kill_requests</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.check_job_kill_requests" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for job kill requests.</p>
<p>If found and job is still running kill it.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.check_new_jobs">
<tt class="descname">check_new_jobs</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.check_new_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for new job files in the queue directory.</p>
<p>If found try to submit them to selected job scheduler.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.check_old_jobs">
<tt class="descname">check_old_jobs</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.check_old_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for jobs that exceed their life time.</p>
<p>If found mark them for removal.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.check_running_jobs">
<tt class="descname">check_running_jobs</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.check_running_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Check status of running jobs.</p>
<p>Finished jobs will be marked for finalisation</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.collect_garbage">
<tt class="descname">collect_garbage</tt><big>(</big><em>service</em>, <em>full=False</em><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.collect_garbage" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if service quota is not exceeded. If yes remove oldest finished
jobs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>service</strong> &#8211; Service name for which garbage collection should be
performed,</li>
<li><strong>delta</strong> &#8211; Perform the quota check as if current disk usage was
increased by delta MBs.</li>
<li><strong>full</strong> &#8211; If True force garbage collection even if disk usage is
not above alloted quota. In addition removes all jobs older than
min job life time.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True if quota is not reached or garbage collection succeeded.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.get_job">
<tt class="descname">get_job</tt><big>(</big><em>job_id</em>, <em>create=False</em><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.get_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Job object from internal list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>job_id</strong> &#8211; Job unique ID,</li>
<li><strong>create</strong> &#8211; If job identified by <em>job_id</em> is not found in the list
an ERROR message is logged. When create is True a new Job object is
created and added to the list,</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Job object if <em>job_id</em> was found, None otherwise.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.get_job_ids">
<tt class="descname">get_job_ids</tt><big>(</big><em>state='all'</em><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.get_job_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Get IDs of existing jobs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>state</strong> &#8211; State of the jobs to return. Valid values:</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>all</li>
<li>waiting</li>
<li>queued</li>
<li>running</li>
<li>closing</li>
<li>cleanup</li>
<li>done</li>
<li>failed</li>
<li>aborted</li>
<li>killed</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize JobManager. Creates new instaces of Validator and
Schedulers. Loads existing jobs from file system.</p>
<p>Existing state is purged.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.run">
<tt class="descname">run</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Main loop of JobManager.</p>
<ul class="simple">
<li>Check for new jobs - submit them if found,</li>
<li>Check for finished jobs - retrive output if found,</li>
<li>Check for jobs exceeding their life time - mark for removal,</li>
<li>Check for jobs to be removed - delete all related resources.</li>
</ul>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.shutdown">
<tt class="descname">shutdown</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop all running jobs.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.start">
<tt class="descname">start</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Restart the queue.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.stop">
<tt class="descname">stop</tt><big>(</big><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Pause the queue. New jobs will not be processed.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.JobManager.JobManager.submit">
<tt class="descname">submit</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.JobManager.JobManager.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate job related scripts and submit them to selected scheduler.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; The Job object to submit.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True on success, False otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-CISAppServer.Tools">
<span id="tools-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Tools</span></tt> Module<a class="headerlink" href="#module-CISAppServer.Tools" title="Permalink to this headline">¶</a></h2>
<p>Utility classes used by CISAppServer: validation, communication with queue
managers, etc.</p>
<dl class="class">
<dt id="CISAppServer.Tools.CTemplate">
<em class="property">class </em><tt class="descclassname">CISAppServer.Tools.</tt><tt class="descname">CTemplate</tt><big>(</big><em>template</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.CTemplate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">string.Template</span></tt></p>
<p>Class used to substitute placeholder strings in script templates.
The placeholders have following form: &#64;&#64;{KEY}.</p>
<dl class="attribute">
<dt id="CISAppServer.Tools.CTemplate.delimiter">
<tt class="descname">delimiter</tt><em class="property"> = '&#64;&#64;'</em><a class="headerlink" href="#CISAppServer.Tools.CTemplate.delimiter" title="Permalink to this definition">¶</a></dt>
<dd><p>Delimiter identifying keywords.</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.CTemplate.idpattern">
<tt class="descname">idpattern</tt><em class="property"> = '[_a-z0-9]+'</em><a class="headerlink" href="#CISAppServer.Tools.CTemplate.idpattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.CTemplate.pattern">
<tt class="descname">pattern</tt><em class="property"> = &lt;_sre.SRE_Pattern object at 0x26dff10&gt;</em><a class="headerlink" href="#CISAppServer.Tools.CTemplate.pattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="CISAppServer.Tools.PbsScheduler">
<em class="property">class </em><tt class="descclassname">CISAppServer.Tools.</tt><tt class="descname">PbsScheduler</tt><big>(</big><em>jm</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.PbsScheduler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CISAppServer.Tools.Scheduler" title="CISAppServer.Tools.Scheduler"><tt class="xref py py-class docutils literal"><span class="pre">CISAppServer.Tools.Scheduler</span></tt></a></p>
<p>Class implementing simple interface for PBS queue system.</p>
<p>Allows for job submission, deletion and extraction of job status.</p>
<dl class="attribute">
<dt id="CISAppServer.Tools.PbsScheduler.default_queue">
<tt class="descname">default_queue</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.PbsScheduler.default_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Default PBS queue</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.PbsScheduler.max_jobs">
<tt class="descname">max_jobs</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.PbsScheduler.max_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum number of concurent jobs</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.PbsScheduler.queue_path">
<tt class="descname">queue_path</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.PbsScheduler.queue_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where submitted PBS job IDs are stored</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.PbsScheduler.stop">
<tt class="descname">stop</tt><big>(</big><em>job</em>, <em>msg</em>, <em>exit_code</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.PbsScheduler.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop running job and remove it from PBS queue.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</li>
<li><strong>msg</strong> &#8211; Message that will be passed to the user</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.PbsScheduler.submit">
<tt class="descname">submit</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.PbsScheduler.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit a job to PBS queue. The &#8220;pbs.sh&#8221; script should be already
present in the pbs_work_path/job directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True on success and False otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.PbsScheduler.update">
<tt class="descname">update</tt><big>(</big><em>jobs</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.PbsScheduler.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update job states to match their current state in PBS queue.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jobs</strong> &#8211; A list of Job instances for jobs to be updated.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.PbsScheduler.work_path">
<tt class="descname">work_path</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.PbsScheduler.work_path" title="Permalink to this definition">¶</a></dt>
<dd><p>PBS Working directory path</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CISAppServer.Tools.Scheduler">
<em class="property">class </em><tt class="descclassname">CISAppServer.Tools.</tt><tt class="descname">Scheduler</tt><big>(</big><em>jm</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Scheduler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Virtual Class implementing simple interface for execution backend. Actual
execution backends should derive from this class and implement defined
interface.</p>
<p>Allows for job submission, deletion and extraction of job status.</p>
<dl class="method">
<dt id="CISAppServer.Tools.Scheduler.abort">
<tt class="descname">abort</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Scheduler.abort" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleanup aborted job.</p>
<p>Removes working and output directories.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Scheduler.chain_input_data">
<tt class="descname">chain_input_data</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Scheduler.chain_input_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Chain output data of finished jobs as our input.</p>
<p>Copies output data of specified job IDs into the working directory of
current job.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance after validation</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True on success and False otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Scheduler.default_queue">
<tt class="descname">default_queue</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Scheduler.default_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Default queue</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Scheduler.finalise">
<tt class="descname">finalise</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Scheduler.finalise" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare output of finished job.</p>
<p>Job working directory is moved to the external_data_path directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Scheduler.generate_scripts">
<tt class="descname">generate_scripts</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Scheduler.generate_scripts" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate scripts and job input files from templates.</p>
<p>Will walk through service_data_path/service and copy all files
including recursion through subdirectories to PBS work directory for
specified job (the directory structure is retained). For all files
substitute all occurences of &#64;&#64;{atribute_name} with specified values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance after validation</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True on success and False otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Scheduler.jm">
<tt class="descname">jm</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Scheduler.jm" title="Permalink to this definition">¶</a></dt>
<dd><p>JobManager instance</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Scheduler.max_jobs">
<tt class="descname">max_jobs</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Scheduler.max_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum number of concurent jobs</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Scheduler.progress">
<tt class="descname">progress</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Scheduler.progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the job progress log and expose it to the user.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Scheduler.queue_path">
<tt class="descname">queue_path</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Scheduler.queue_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where submitted job IDs are stored</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Scheduler.stop">
<tt class="descname">stop</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Scheduler.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop running job and remove it from execution queue.</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Scheduler.submit">
<tt class="descname">submit</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Scheduler.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit a job for execution. The &#8220;pbs.sh&#8221; script should be already
present in the work_path/job directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True on success and False otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Scheduler.work_path">
<tt class="descname">work_path</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Scheduler.work_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Working directory path</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CISAppServer.Tools.Service">
<em class="property">class </em><tt class="descclassname">CISAppServer.Tools.</tt><tt class="descname">Service</tt><big>(</big><em>name</em>, <em>data</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Service" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></p>
<p>Class implementing a Service.</p>
<p>Stores Service configuration and monitors its state.</p>
<p>Service C-tor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; The name of the service.</li>
<li><strong>data</strong> &#8211; Dict with service config read from JSON data file.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Other arguments are passed to dict parent class.</p>
<dl class="method">
<dt id="CISAppServer.Tools.Service.add_job_proxy">
<tt class="descname">add_job_proxy</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Service.add_job_proxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new job proxy. The current service quota usage will increase by the
amount defined in service config by job_size variable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Service.config">
<tt class="descname">config</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Service.config" title="Permalink to this definition">¶</a></dt>
<dd><p>Configuration options affecting service handling - like allowed
diskspace and garbage collection</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Service.current_size">
<tt class="descname">current_size</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Service.current_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Projection of space usage by service output files</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Service.name">
<tt class="descname">name</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Service.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Service name</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Service.real_size">
<tt class="descname">real_size</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Service.real_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Real space usage by service output files</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Service.remove_job">
<tt class="descname">remove_job</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Service.remove_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the job and its proxy. Adjust the usage of the service quota.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Service.remove_job_proxy">
<tt class="descname">remove_job_proxy</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Service.remove_job_proxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a job proxy. The current service quota usage will decrease by
the job size. Job size should have been determined by the update_job
call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Service.sets">
<tt class="descname">sets</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Service.sets" title="Permalink to this definition">¶</a></dt>
<dd><p>Definitions of allowed variable sets</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Service.update_job">
<tt class="descname">update_job</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Service.update_job" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the current size of the output files of the job. Adjusts
usage of the current and real quotas for the service.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Service.variables">
<tt class="descname">variables</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Service.variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Definitions of allowed variables</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CISAppServer.Tools.SshScheduler">
<em class="property">class </em><tt class="descclassname">CISAppServer.Tools.</tt><tt class="descname">SshScheduler</tt><big>(</big><em>jm</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.SshScheduler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#CISAppServer.Tools.Scheduler" title="CISAppServer.Tools.Scheduler"><tt class="xref py py-class docutils literal"><span class="pre">CISAppServer.Tools.Scheduler</span></tt></a></p>
<p>Class implementing simple interface for job execution through SSH.</p>
<p>Allows for job submission, deletion and extraction of job status.</p>
<dl class="attribute">
<dt id="CISAppServer.Tools.SshScheduler.default_queue">
<tt class="descname">default_queue</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.SshScheduler.default_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Default SSH execute host</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.SshScheduler.max_jobs">
<tt class="descname">max_jobs</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.SshScheduler.max_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict of maximum number of concurent jobs per execution host</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.SshScheduler.queue_path">
<tt class="descname">queue_path</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.SshScheduler.queue_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where submitted SSH job IDs are stored</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.SshScheduler.stop">
<tt class="descname">stop</tt><big>(</big><em>job</em>, <em>msg</em>, <em>exit_code</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.SshScheduler.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop running job and remove it from SSH queue.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</li>
<li><strong>msg</strong> &#8211; Message that will be passed to the user</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.SshScheduler.submit">
<tt class="descname">submit</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.SshScheduler.submit" title="Permalink to this definition">¶</a></dt>
<dd><p>Submit a job to execution host via SSH queue. The &#8220;pbs.sh&#8221; script
should be already present in the ssh_work_path/job directory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">True on success and False otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.SshScheduler.update">
<tt class="descname">update</tt><big>(</big><em>jobs</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.SshScheduler.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update job states to match their current state on SSH execution host.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>jobs</strong> &#8211; A list of Job instances for jobs to be updated.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.SshScheduler.work_path">
<tt class="descname">work_path</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.SshScheduler.work_path" title="Permalink to this definition">¶</a></dt>
<dd><p>SSH Working directory path</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CISAppServer.Tools.Validator">
<em class="property">class </em><tt class="descclassname">CISAppServer.Tools.</tt><tt class="descname">Validator</tt><big>(</big><em>jm</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Validator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Class responsible for validation of job input data.
It is also responsible for preparation of PBS scripts.</p>
<p>Upon initialisation load services configuration.</p>
<dl class="attribute">
<dt id="CISAppServer.Tools.Validator.api_max">
<tt class="descname">api_max</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Validator.api_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Max API level</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Validator.api_min">
<tt class="descname">api_min</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Validator.api_min" title="Permalink to this definition">¶</a></dt>
<dd><p>Min API level</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Validator.jm">
<tt class="descname">jm</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Validator.jm" title="Permalink to this definition">¶</a></dt>
<dd><p>JobManager instance</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Tools.Validator.services">
<tt class="descname">services</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Tools.Validator.services" title="Permalink to this definition">¶</a></dt>
<dd><p>Services configurations</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Validator.validate">
<tt class="descname">validate</tt><big>(</big><em>job</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Validator.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate job input data and update <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance with
validated data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>job</strong> &#8211; <tt class="xref py py-class docutils literal"><span class="pre">Job</span></tt> instance</td>
</tr>
<tr class="field-even field"><th class="field-name">Rerurn :</th><td class="field-body">True on success False otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Validator.validate_chain">
<tt class="descname">validate_chain</tt><big>(</big><em>chain</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Validator.validate_chain" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Validator.validate_float">
<tt class="descname">validate_float</tt><big>(</big><em>key</em>, <em>value</em>, <em>min</em>, <em>max</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Validator.validate_float" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Validator.validate_int">
<tt class="descname">validate_int</tt><big>(</big><em>key</em>, <em>value</em>, <em>min</em>, <em>max</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Validator.validate_int" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="CISAppServer.Tools.Validator.validate_value">
<tt class="descname">validate_value</tt><big>(</big><em>key</em>, <em>value</em>, <em>service</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.Validator.validate_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate value for specified service attribute.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>key</strong> &#8211; attribute name</li>
<li><strong>value</strong> &#8211; value to validate</li>
<li><strong>service</strong> &#8211; service object for which attribute is defined</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True on success False otherwise.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="CISAppServer.Tools.rmtree_error">
<tt class="descclassname">CISAppServer.Tools.</tt><tt class="descname">rmtree_error</tt><big>(</big><em>function</em>, <em>path</em>, <em>exc_info</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.rmtree_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception handler for shutil.rmtree().</p>
</dd></dl>

<dl class="function">
<dt id="CISAppServer.Tools.verbose">
<tt class="descclassname">CISAppServer.Tools.</tt><tt class="descname">verbose</tt><big>(</big><em>msg</em>, <em>exc_info=False</em><big>)</big><a class="headerlink" href="#CISAppServer.Tools.verbose" title="Permalink to this definition">¶</a></dt>
<dd><p>Log message with VERBOSE log level.</p>
<p>VERBOSE log level is higher than DEBUG and should be used for large debug
messages, e.g. data dumps, output from subprocesses, etc.</p>
</dd></dl>

</div>
<div class="section" id="module-CISAppServer.Config">
<span id="config-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Config</span></tt> Module<a class="headerlink" href="#module-CISAppServer.Config" title="Permalink to this headline">¶</a></h2>
<p>Global configuration for CISAppServer.</p>
<dl class="class">
<dt id="CISAppServer.Config.Config">
<em class="property">class </em><tt class="descclassname">CISAppServer.Config.</tt><tt class="descname">Config</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#CISAppServer.Config.Config" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></p>
<p>Class responsible for configuration storage and initialization.</p>
<p>Config stores variables as instace members e.g.:</p>
<blockquote>
<div>conf.config_file</div></blockquote>
<p>The variables are also accessible via dictionary interface e.g.:</p>
<blockquote>
<div>conf[&#8216;conf_file&#8217;]</div></blockquote>
<p>Upon initialisation some default values are applied to the variables.
However to finish the initialization <a class="reference internal" href="#CISAppServer.Config.Config.load" title="CISAppServer.Config.Config.load"><tt class="xref py py-meth docutils literal"><span class="pre">Config.load()</span></tt></a> method
should be called.</p>
<dl class="attribute">
<dt id="CISAppServer.Config.Config.config_file">
<tt class="descname">config_file</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.config_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Config file name</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.config_progress_step">
<tt class="descname">config_progress_step</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.config_progress_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Every n-th status query dump the progress logs</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.config_schedulers">
<tt class="descname">config_schedulers</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.config_schedulers" title="Permalink to this definition">¶</a></dt>
<dd><p>Enabled schedulers</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.config_shutdown_time">
<tt class="descname">config_shutdown_time</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.config_shutdown_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Timeout for job cleanup before forcing shutdown</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.config_sleep_time">
<tt class="descname">config_sleep_time</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.config_sleep_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Sleep interval in seconds between job status queries</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.daemon_path_installdir">
<tt class="descname">daemon_path_installdir</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.daemon_path_installdir" title="Permalink to this definition">¶</a></dt>
<dd><p>AppServer install directory</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.daemon_path_pidfile">
<tt class="descname">daemon_path_pidfile</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.daemon_path_pidfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Daemon mode pid file path</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.daemon_path_workdir">
<tt class="descname">daemon_path_workdir</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.daemon_path_workdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Working directory of daemon</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.daemon_pidfile_timeout">
<tt class="descname">daemon_pidfile_timeout</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.daemon_pidfile_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Timeout for daemon mode pid file acquisition</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path">
<tt class="descname">gate_path</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of job states with corresponding paths</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_aborted">
<tt class="descname">gate_path_aborted</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_aborted" title="Permalink to this definition">¶</a></dt>
<dd><p>Path were where aborted jobs are symlinked</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_cleanup">
<tt class="descname">gate_path_cleanup</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where jobs during cleanup are symlinked</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_closing">
<tt class="descname">gate_path_closing</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_closing" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where jobs waiting for cleanup are symlinked</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_delete">
<tt class="descname">gate_path_delete</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Path were where jobs scheduled for removal are symlinked</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_done">
<tt class="descname">gate_path_done</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_done" title="Permalink to this definition">¶</a></dt>
<dd><p>Path were where done jobs are symlinked</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_dump">
<tt class="descname">gate_path_dump</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where jobs output is moved before removal (aleviates problems
with files that are still in use)</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_exit">
<tt class="descname">gate_path_exit</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where jobs exit status is stored</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_failed">
<tt class="descname">gate_path_failed</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_failed" title="Permalink to this definition">¶</a></dt>
<dd><p>Path were where failed jobs are symlinked</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_jobs">
<tt class="descname">gate_path_jobs</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where jobs description is stored</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_killed">
<tt class="descname">gate_path_killed</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_killed" title="Permalink to this definition">¶</a></dt>
<dd><p>Path were where killed jobs are symlinked</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_opts">
<tt class="descname">gate_path_opts</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_opts" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where jobs internal state is stored</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_output">
<tt class="descname">gate_path_output</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where jobs output will be stored</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_queued">
<tt class="descname">gate_path_queued</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_queued" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where queued jobs are symlinked</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_running">
<tt class="descname">gate_path_running</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_running" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where running jobs are symlinked</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_shared">
<tt class="descname">gate_path_shared</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_shared" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to the shared storage used as communication medium with
AppGateway</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_stop">
<tt class="descname">gate_path_stop</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Path were where jobs scheduled to be killed are symlinked</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.gate_path_waiting">
<tt class="descname">gate_path_waiting</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.gate_path_waiting" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where waiting jobs are symlinked</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Config.Config.json_load">
<tt class="descname">json_load</tt><big>(</big><em>file</em><big>)</big><a class="headerlink" href="#CISAppServer.Config.Config.json_load" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a JSON file</p>
<p>First remove comments and then use the json module package
Comments look like</p>
<div class="highlight-python"><pre>    // ...
or
    /*
    ...
    */</pre>
</div>
<p>Based on:
<a class="reference external" href="http://www.lifl.fr/~riquetd/parse-a-json-file-with-comments.html">http://www.lifl.fr/~riquetd/parse-a-json-file-with-comments.html</a>.
Much faster than <a class="reference external" href="https://github.com/getify/JSON.minify">https://github.com/getify/JSON.minify</a> and
<a class="reference external" href="https://gist.github.com/WizKid/1170297">https://gist.github.com/WizKid/1170297</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file</strong> &#8211; name of the file to parse.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Config.Config.load">
<tt class="descname">load</tt><big>(</big><em>conf_name=None</em><big>)</big><a class="headerlink" href="#CISAppServer.Config.Config.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load CISAppServer configuration from JSON file and finalize the
initialisation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>conf_name</strong> &#8211; name of CISAppServer config file. When <em>None</em> is
provided hardcoded defaults are used.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.log_config">
<tt class="descname">log_config</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.log_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Configuration of logging module</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.log_email">
<tt class="descname">log_email</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.log_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Email to send the error messages</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.log_level">
<tt class="descname">log_level</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.log_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Logging level</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.log_level_cli">
<tt class="descname">log_level_cli</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.log_level_cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Logging level CLI override</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.log_output">
<tt class="descname">log_output</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.log_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Log output file name</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.log_output_cli">
<tt class="descname">log_output_cli</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.log_output_cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Log output file name CLI override</p>
</dd></dl>

<dl class="method">
<dt id="CISAppServer.Config.Config.mkdir_p">
<tt class="descname">mkdir_p</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#CISAppServer.Config.Config.mkdir_p" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.pbs_default_queue">
<tt class="descname">pbs_default_queue</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.pbs_default_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of default PBS queue</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.pbs_max_jobs">
<tt class="descname">pbs_max_jobs</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.pbs_max_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum number of concurent PBS jobs</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.pbs_path_queue">
<tt class="descname">pbs_path_queue</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.pbs_path_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where PBS backend will store job IDs</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.pbs_path_work">
<tt class="descname">pbs_path_work</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.pbs_path_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where PBS backeng will create job working directories</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_allowed_sections">
<tt class="descname">service_allowed_sections</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_allowed_sections" title="Permalink to this definition">¶</a></dt>
<dd><p>Allowed sections in job submission JSON</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_job_size">
<tt class="descname">service_job_size</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_job_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Default expected output size of a job in MB. It is used to estimate
space requirements for jobs that are to be scheduled.</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_max_jobs">
<tt class="descname">service_max_jobs</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_max_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Default maximum number of concurrent jobs allowed per dervice</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_max_lifetime">
<tt class="descname">service_max_lifetime</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_max_lifetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Default job maximum lifetime in hours (supports fractions). Jobs
that are older then this will be removed by garbage collector.
Setting this to zero means jobs can be immortal (at least until
service quota is exceeded)</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_max_runtime">
<tt class="descname">service_max_runtime</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_max_runtime" title="Permalink to this definition">¶</a></dt>
<dd><p>Default job maximum running time in hours (supports fractions). Jobs
that are in running state longer then this will be killed and
removed by garbage collector.</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_min_lifetime">
<tt class="descname">service_min_lifetime</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_min_lifetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Default job minimum lifetime in hours (supports fractions). Jobs
that are younger then this cannot be removed by garbage collector</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_path_conf">
<tt class="descname">service_path_conf</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_path_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Path with services configuration files</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_path_data">
<tt class="descname">service_path_data</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_path_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Path with services scripts and input files</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_quota">
<tt class="descname">service_quota</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_quota" title="Permalink to this definition">¶</a></dt>
<dd><p>Defaul maximum disk size used by service output files in MB</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_reserved_keys">
<tt class="descname">service_reserved_keys</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_reserved_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Reserved key names for job parameters</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_states">
<tt class="descname">service_states</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_states" title="Permalink to this definition">¶</a></dt>
<dd><p>Valid job states as well as names of directories on shared storage
that are used to monitor job states</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.service_username">
<tt class="descname">service_username</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.service_username" title="Permalink to this definition">¶</a></dt>
<dd><p>Default user name for job execution</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.ssh_default_queue">
<tt class="descname">ssh_default_queue</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.ssh_default_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of default SSH execution host</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.ssh_max_jobs">
<tt class="descname">ssh_max_jobs</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.ssh_max_jobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum number of concurent jobs per SSH execution host</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.ssh_path_queue">
<tt class="descname">ssh_path_queue</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.ssh_path_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where SSH backend will store job IDs</p>
</dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.Config.ssh_path_work">
<tt class="descname">ssh_path_work</tt><em class="property"> = None</em><a class="headerlink" href="#CISAppServer.Config.Config.ssh_path_work" title="Permalink to this definition">¶</a></dt>
<dd><p>Path where SSH backeng will create job working directories</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="CISAppServer.Config.ExitCodes">
<em class="property">class </em><tt class="descclassname">CISAppServer.Config.</tt><tt class="descname">ExitCodes</tt><a class="headerlink" href="#CISAppServer.Config.ExitCodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Job exit codes enum:</p>
<ul class="simple">
<li>-100: Undefined (this should not happen)</li>
<li>-99: Abort (default)</li>
<li>-98: Shutdown</li>
<li>-97: Delete</li>
<li>-96: UserKill</li>
<li>-95: SchedulerKill</li>
<li>-94: Validate</li>
</ul>
<dl class="attribute">
<dt id="CISAppServer.Config.ExitCodes.Abort">
<tt class="descname">Abort</tt><em class="property"> = -99</em><a class="headerlink" href="#CISAppServer.Config.ExitCodes.Abort" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.ExitCodes.Delete">
<tt class="descname">Delete</tt><em class="property"> = -97</em><a class="headerlink" href="#CISAppServer.Config.ExitCodes.Delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.ExitCodes.SchedulerKill">
<tt class="descname">SchedulerKill</tt><em class="property"> = -95</em><a class="headerlink" href="#CISAppServer.Config.ExitCodes.SchedulerKill" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.ExitCodes.Shutdown">
<tt class="descname">Shutdown</tt><em class="property"> = -98</em><a class="headerlink" href="#CISAppServer.Config.ExitCodes.Shutdown" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.ExitCodes.Undefined">
<tt class="descname">Undefined</tt><em class="property"> = -100</em><a class="headerlink" href="#CISAppServer.Config.ExitCodes.Undefined" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.ExitCodes.UserKill">
<tt class="descname">UserKill</tt><em class="property"> = -96</em><a class="headerlink" href="#CISAppServer.Config.ExitCodes.UserKill" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="CISAppServer.Config.ExitCodes.Validate">
<tt class="descname">Validate</tt><em class="property"> = -94</em><a class="headerlink" href="#CISAppServer.Config.ExitCodes.Validate" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="data">
<dt id="CISAppServer.Config.conf">
<tt class="descclassname">CISAppServer.Config.</tt><tt class="descname">conf</tt><em class="property"> = {'pbs_path_work': 'PBS/Scratch', 'gate_path_dump': 'Dump', 'service_max_jobs': 80, 'service_max_runtime': 12, 'daemon_pidfile_timeout': -1, 'gate_path_running': None, 'config_schedulers': ('pbs', 'ssh'), 'log_config': {'handlers': {'mail': {'toaddrs': '', 'level': 'ERROR', 'fromaddr': 'kklimaszewski&#64;cis.gov.pl', 'mailhost': 'localhost', 'formatter': 'verbose', 'class': 'logging.handlers.SMTPHandler', 'subject': 'AppServer Error'}, 'console': {'formatter': 'simple', 'class': 'logging.StreamHandler', 'level': 'INFO'}, 'file': {'backupCount': 5, 'level': 'INFO', 'filename': '/tmp/CISAppServer.log', 'formatter': 'verbose', 'class': 'logging.handlers.RotatingFileHandler', 'maxBytes': 10000000}}, 'version': 1, 'root': {'level': 'INFO', 'handlers': ['console', 'file', 'mail']}, 'disable_existing_loggers': False, 'formatters': {'simple': {'format': '%(levelname)s %(message)s'}, 'verbose': {'datefmt': '%m-%d %H:%M:%S', 'format': '%(levelname)s %(asctime)s %(module)s : %(message)s'}}}, 'log_email': '', 'daemon_path_workdir': '/mnt/home/kklimaszewski/Soft/WebServices/Docs', 'daemon_path_pidfile': '/tmp/CISAppServer.pid', 'service_reserved_keys': ('CIS_SCHEDULER', 'CIS_QUEUE', 'CIS_SSH_HOST'), 'log_level_cli': None, 'log_level': 'INFO', 'gate_path_cleanup': None, 'service_min_lifetime': 2, 'gate_path_failed': None, 'ssh_max_jobs': {'localhost': 2}, 'gate_path_shared': 'Shared', 'ssh_default_queue': 'localhost', 'pbs_max_jobs': 100, 'service_path_conf': 'Services', 'gate_path_opts': None, 'gate_path': {'stop': None, 'running': None, 'done': None, 'aborted': None, 'killed': None, 'failed': None, 'waiting': None, 'cleanup': None, 'closing': None, 'queued': None, 'delete': None}, 'gate_path_exit': None, 'gate_path_aborted': None, 'service_max_lifetime': 24, 'config_file': None, 'gate_path_stop': None, 'config_sleep_time': 3, 'service_quota': 10000, 'pbs_default_queue': 'short', 'gate_path_killed': None, 'gate_path_jobs': None, 'daemon_path_installdir': '/mnt/home/kklimaszewski/Soft/WebServices/AppServer/CISAppServer', 'pbs_path_queue': 'PBS/Queue', 'ssh_path_work': 'SSH/Scratch', 'gate_path_waiting': None, 'service_username': 'apprunner', 'ssh_path_queue': 'SSH/Queue', 'config_progress_step': 2, 'service_allowed_sections': ('service', 'api', 'input', 'chain'), 'service_states': ('waiting', 'queued', 'running', 'closing', 'cleanup', 'done', 'failed', 'aborted', 'killed'), 'config_shutdown_time': 2, 'gate_path_done': None, 'gate_path_delete': None, 'gate_path_queued': None, 'gate_path_closing': None, 'gate_path_output': 'Output', 'service_job_size': 50, 'log_output': '/tmp/CISAppServer.log', 'service_path_data': 'Services/Data', 'log_output_cli': None}</em><a class="headerlink" href="#CISAppServer.Config.conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Global Config class instance. Use it to access the CISAppGateway
configuration.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="CISAppGateway.html" title="CISAppGateway Package"
             >previous</a> |</li>
        <li><a href="index.html">CIŚ Web Services 0.2 documentation</a> &raquo;</li>
          <li><a href="modules.html" >Implementation reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, CIŚ.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>